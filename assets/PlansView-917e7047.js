import{r,an as k,ab as f,R as v,M as T,V as _,W as h,X as u,ao as l,ap as C,aq as c,Y as n,ac as w,$ as g,ar as N,ad as q}from"./index-015b720c.js";import{Q as I}from"./QTable-0c728d1d.js";import{Q as E}from"./QPage-496596b0.js";import"./QList-50266af3.js";const p=r(),U=()=>{const o=()=>{f().get("v1/plan/all").then(t=>{p.value=t.data})};return{plans:k(p),getPlans:o}},x={class:"q-mt-md"},S=v({__name:"PlansView",setup(o){const{plans:t,getPlans:d}=U(),m=[{name:"title",label:"Title",field:"title"},{name:"typePlan",label:"typePlan",field:"typePlan"},{name:"limitCards",label:"limitCards",field:"limitCards"},{name:"price",label:"price",field:"price"},{name:"stocks",label:"stocks",field:"stocks"}],y=r([{key:"name",label:"Name",value:"",fieldType:l.INPUT,rules:["required"]},{key:"description",label:"Description",value:"",fieldType:l.INPUT,rules:["required"]},{key:"pricePerMonth",label:"Price per month",value:"",fieldType:l.INPUT,type:"number",rules:["required"]},{key:"trialPeriod",label:"Trial period",value:"",fieldType:l.INPUT,type:"number",rules:["required"]},{key:"limitCards",label:"Limit cards",value:"",fieldType:l.INPUT,type:"number",rules:["required"]},{key:"stocks",label:"Stocks",value:"",fieldType:l.INPUT,type:"number",rules:["required","max-5","min-2"]},{key:"tariffPlan",label:"Tariff plan",value:{label:"",value:null},options:C,fieldType:l.SELECT,multiple:!1,rules:["required"]}]),i=r(null),b=()=>{var a;(a=i.value)==null||a.showDialog()},P=a=>{const s={};a.forEach(e=>{e.fieldType===l.SELECT?s[e.key]=typeof e.value=="object"?e.value:e.value.value:s[e.key]=e.value}),f().post("/v1/plan",s).finally(()=>{var e;(e=i.value)==null||e.showDialog(),d()})};return T(()=>{d()}),(a,s)=>(_(),h(E,{padding:""},{default:u(()=>[c("div",null,[n(w,{color:"white","text-color":"black",label:"Add new plan",onClick:b})]),c("div",x,[n(I,{title:"Plans","hide-pagination":"",rows:g(t)||[],columns:m,"row-key":"name"},null,8,["rows"])]),n(q,{ref_key:"dialogInstance",ref:i,header:"Add new plan","submit-title":"Create","cancel-title":"Cancel",hideDialogButtons:""},{body:u(()=>[n(N,{fields:y.value,onHandleSubmit:P},null,8,["fields"])]),_:1},512)]),_:1}))}});export{S as default};
