import{R as x,r as i,M as N,V as S,W as F,X as l,Y as a,a8 as O,aq as t,a4 as d,a5 as s,a6 as r,ac as h,as as z,at as B,au as P,$ as U,ar as k,ad as w,ao as m}from"./index-d799c111.js";import{a as c,Q as $}from"./QTable-c8c84515.js";import{Q as A}from"./QTd-a6691587.js";import{Q as M}from"./QPage-d65c8cd2.js";import{u as R}from"./useCategories-313d0f16.js";import"./QList-f0f2504e.js";const Y=t("div",{class:"row q-mb-md"},[t("h5",null,"CATEGORIES")],-1),G={class:"q-mt-md"},H=["src"],L={class:"full-width row wrap justify-between"},j={class:"row"},le=x({__name:"CategoriesView",setup(W){const{categories:T,getCategories:g,editCategory:D,addCategory:E}=R(),f=i(""),p=i(null),y=i(null),v=i(["icon","name","updatedAt","actions"]),C=[{name:"id",label:"ID",field:"id",align:"center"},{name:"icon",label:"ICON",field:"icon",align:"center"},{name:"name",label:"NAME",field:"name",align:"center"},{name:"updatedAt",label:"UPDATED",field:"updatedAt",align:"center"},{name:"actions",label:"ACTIONS",field:"actions",align:"center"}],b=i([]),_=i([]),Q=()=>{var n;b.value=[{key:"name",label:"Category name",value:"",maxLength:50,fieldType:m.INPUT,rules:["required"]},{key:"icon",label:"Category icon",value:["/src/assets/icons/upload.png",""],fieldType:m.CATEGORY_ICON,rules:["required"]}],(n=p.value)==null||n.showDialog()},q=n=>{var o;_.value=[{key:"name",label:"Category name",value:n.name,fieldType:m.INPUT,rules:["required"]},{key:"icon",label:"Category icon",value:[n.icon,""],fieldType:m.CATEGORY_ICON},{key:"id",value:n.id}],(o=y.value)==null||o.showDialog()},I=n=>{const o=new FormData;n.forEach(e=>{e.value&&(Array.isArray(e.value)?o.append(e.key,e.value[1]):o.append(e.key,e.value))}),E(o).then(()=>{var e;(e=p.value)==null||e.hideDialog(),g()})},V=n=>{const o=new FormData;n.forEach(e=>{e.value&&(Array.isArray(e.value)?o.append(e.key,e.value[1]):o.append(e.key,e.value))}),D(o).then(()=>{var e;(e=y.value)==null||e.hideDialog(),g()})};return N(()=>{g()}),(n,o)=>(S(),F(M,{padding:""},{default:l(()=>[Y,a(O,{color:"primary",spaced:"",size:"2px"}),t("div",G,[a($,{flat:"",bordered:"",title:"Categories",rows:U(T),columns:C,"row-key":"id",filter:f.value,"visible-columns":v.value},{"header-cell-id":l(e=>[a(c,{props:e},{default:l(()=>[a(d,{name:"badge",size:"1.7em",color:"light-blue-14"}),s(" "+r(e.col.label),1)]),_:2},1032,["props"])]),"header-cell-name":l(e=>[a(c,{props:e},{default:l(()=>[a(d,{name:"description",size:"1.5em",color:"light-blue-14"}),s(" "+r(e.col.label),1)]),_:2},1032,["props"])]),"header-cell-icon":l(e=>[a(c,{props:e},{default:l(()=>[a(d,{name:"photo_camera",size:"1.5em",color:"light-blue-14"}),s(" "+r(e.col.label),1)]),_:2},1032,["props"])]),"header-cell-updatedAt":l(e=>[a(c,{props:e},{default:l(()=>[a(d,{name:"event",size:"1.5em",color:"light-blue-14"}),s(" "+r(e.col.label),1)]),_:2},1032,["props"])]),"header-cell-actions":l(e=>[a(c,{props:e},{default:l(()=>[a(d,{name:"manage_accounts",size:"1.5em",color:"light-blue-14"}),s(" "+r(e.col.label),1)]),_:2},1032,["props"])]),"body-cell-actions":l(e=>[a(A,{props:e},{default:l(()=>[a(h,{class:"q-mr-sm",dense:"",flat:"",round:"",color:"blue",icon:"edit",onClick:z(u=>q(e.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-icon":l(e=>[a(A,{props:e},{default:l(()=>[t("img",{src:e.value,width:"40",height:"40"},null,8,H)]),_:2},1032,["props"])]),top:l(e=>[t("div",L,[t("div",null,[a(h,{label:"Add category",icon:"widgets",color:"primary",onClick:Q})]),t("div",j,[a(B,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=u=>v.value=u),multiple:"",outlined:"",dense:"","options-dense":"","display-value":n.$q.lang.table.columns,"emit-value":"","map-options":"",options:C,"option-value":"name","options-cover":"",style:{"min-width":"150px"},class:"q-mx-md"},null,8,["modelValue","display-value"]),a(P,{dense:"",outlined:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=u=>f.value=u),placeholder:"Search",class:"q-mx-md"},{append:l(()=>[a(d,{name:"search"})]),_:1},8,["modelValue"]),a(h,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen,class:"q-mx-md"},null,8,["icon","onClick"])])])]),_:1},8,["rows","filter","visible-columns"])]),a(w,{ref_key:"dialogAddCategory",ref:p,icon:"add",header:"Add new category",hideDialogButtons:""},{body:l(()=>[a(k,{fields:b.value,onHandleSubmit:I},null,8,["fields"])]),_:1},512),a(w,{ref_key:"dialogEditCategory",ref:y,icon:"edit",header:"Edit category",hideDialogButtons:""},{body:l(()=>[a(k,{fields:_.value,onHandleSubmit:V},null,8,["fields"])]),_:1},512)]),_:1}))}});export{le as default};
